{
  "name": "bug-fix",
  "description": "Repair stability issues with root cause analysis and heuristic extraction",
  "steps": [
    {
      "step": 1,
      "name": "Error Capture",
      "action": "capture",
      "fields": [
        "error_message",
        "stack_trace",
        "error_domain"
      ]
    },
    {
      "step": 2,
      "name": "Chronicle Check",
      "action": "search_files",
      "path": "src/docs/history/repair-logs",
      "pattern": "{error_pattern}",
      "purpose": "Search for similar issues in repair logs"
    },
    {
      "step": 3,
      "name": "Root Cause Analysis",
      "action": "analyze",
      "steps": [
        "Trace error to source file",
        "Identify triggering condition",
        "Map error to domain (Physics/Render/State)"
      ]
    },
    {
      "step": 4,
      "name": "Safeguard Verification",
      "action": "verify",
      "checks": [
        "WASM Finite Guard: All physics inputs pass Number.isFinite()",
        "PBR Binary Metalness: Metalness is 0.0 or 1.0",
        "Zoneless Integrity: No zone.run usage"
      ]
    },
    {
      "step": 5,
      "name": "Fix Implementation",
      "action": "repair",
      "approach": "Minimal fix with verification"
    },
    {
      "step": 6,
      "name": "Create Repair Log",
      "action": "create_directory",
      "path": "src/docs/history/repair-logs/{issue-name}"
    },
    {
      "step": 7,
      "name": "Document Fix",
      "action": "write_file",
      "target": "src/docs/history/repair-logs/{issue-name}/mapping.md",
      "content": "# {issue-name} Repair Log\n\n## Error\n{error_message}\n\n## Root Cause\n{root_cause}\n\n## Fix\n{fix_description}\n\n## Prevention\n{heuristic}"
    },
    {
      "step": 8,
      "name": "Update Memory",
      "action": "append_file",
      "target": "src/docs/history/memory.md",
      "content": "* [FIX]: {issue-name} - {fix_summary}"
    }
  ]
}
